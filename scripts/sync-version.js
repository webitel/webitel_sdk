const fs = require('fs')
const path = require('path')

const packageJsonPath = path.resolve(__dirname, '..', 'package.json')
const versionTsPath = path.resolve(__dirname, '..', 'src', 'version.ts')

try {
  const packageJson = JSON.parse(fs.readFileSync(packageJsonPath, 'utf8'))
  const version = packageJson.version

  const content = `// This file is automatically generated by scripts/sync-version.js
export const version = '${version}'
`

  fs.writeFileSync(versionTsPath, content, 'utf8')
  console.log(`Successfully wrote version ${version} to ${versionTsPath}`)
} catch (error) {
  console.error('Error syncing version:', error)
  process.exit(1)
}
